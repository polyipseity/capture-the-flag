const $ = require("jquery"); $(document).ready(async function () { var n = await getServers(); for (let i of n) appendServer(i); (socket = io(WS_URL, { query: { token } })).on("message", n => { console.log("Message received:", n), "text" == n.type ? addMessage(n.msg, n.author) : addLink(n.link, n.title, n.description, n.author, n.img), ScrollToEnd() }), socket.on("error", n => { pushErrorNotify("DisLaugh", n) }) }), $(".dialog-close").on("click", function () { $(this).parent().parent().fadeToggle(100) }), $(".join-form").on("submit", async function (n) { n.preventDefault(); var i = await joinServer(getFormData($(this))); i && (appendServer(i), $(".join-server-container").fadeToggle(100)) }), $(".create-form").on("submit", async function (n) { n.preventDefault(); var i = await createServer(getFormData($(this))); i && (appendServer(i), $(".join-server-container").fadeToggle(100)) }), $(".chat-sender").on("submit", async function (n) { n.preventDefault(); var i = getFormData($(this)).message; if (i) { $(this).children("input").prop("disabled", !0); var e = await sendMessage(activeServer, i); $(this).children("input").prop("disabled", !1), e && $(this).children("input").val("") } }), $(".server-invite").on("click", function () { var n = activeServer; $(".invite-code-container .dialog-container .form-input-container .join-input").val(n), $(".invite-code-container").fadeToggle(100) }), $(".ctrl-btn-exit").on("click", function () { window.api.send("exit") }), $(".ctrl-btn-min").on("click", function () { window.api.send("minimize") }), $(".ctrl-btn-max").on("click", function () { window.api.send("maximize") });